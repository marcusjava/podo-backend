(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[13],{352:function(e,t,a){"use strict";var n=a(353),r=a.n(n);t.a=function(e){return new Promise((function(t){r.a.imageFileResizer(e,3280,2464,"JPEG",100,0,(function(e){t(e)}),"blob")}))}},353:function(e,t){e.exports=function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}a.r(t);var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a;return t=e,a=[{key:"changeHeightWidth",value:function(e,t,a,n,r,l){return a>n&&(e=Math.round(e*n/a),a=n),e>t&&(a=Math.round(a*t/e),e=t),r&&a<r&&(e=Math.round(e*r/a),a=r),l&&e<l&&(a=Math.round(a*l/e),e=l),{height:e,width:a}}},{key:"resizeAndRotateImage",value:function(e,t,a,n,r){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"jpeg",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,o=c/100,u=document.createElement("canvas"),d=e.width,s=e.height,m=this.changeHeightWidth(s,a,d,t,n,r);!i||90!==i&&270!==i?(u.width=m.width,u.height=m.height):(u.width=m.height,u.height=m.width),d=m.width,s=m.height;var p=u.getContext("2d");return i&&(p.rotate(i*Math.PI/180),90===i?p.translate(0,-u.width):180===i?p.translate(-u.width,-u.height):270===i?p.translate(-u.height,0):0!==i&&360!==i||p.translate(0,0)),p.drawImage(e,0,0,d,s),u.toDataURL("image/".concat(l),o)}},{key:"b64toBlob",value:function(e,t){t=t||"image/jpeg";for(var a=atob(e.toString().replace(/^data:image\/(png|jpeg|jpg);base64,/,"")),n=[],r=0;r<a.length;r+=512){for(var l=a.slice(r,r+512),c=new Array(l.length),i=0;i<l.length;i++)c[i]=l.charCodeAt(i);var o=new Uint8Array(c);n.push(o)}return new Blob(n,{type:t})}},{key:"createResizedImage",value:function(t,a,n,r,l,c,i){var o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"base64",u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,s=null,m=new FileReader;t?(m.readAsDataURL(t),m.onload=function(){var t=new Image;t.src=m.result,t.onload=function(){var m=e.resizeAndRotateImage(t,a,n,u,d,r,l,c);s=e.b64toBlob(m,"image/".concat(r)),i("blob"===o?s:m)}},m.onerror=function(e){i(e)}):i("File Not Found")}}],null&&n(t.prototype,null),a&&n(t,a),e}();t.default={imageFileResizer:function(e,t,a,n,l,c,i,o,u,d){return r.createResizedImage(e,t,a,n,l,c,i,o,u,d)}}}])},484:function(e,t,a){"use strict";a.r(t);var n=a(42),r=a.n(n),l=a(68),c=a(41),i=a(1),o=a.n(i),u=a(333),d=a(197),s=a(193),m=a(24),p=a(158),b=a(22),h=a(84),f=a(85),g=a(105),E=a(29),v=a(345),y=a(339),j=a(331),w=a(376),F=a(25),O=function(e){var t=e.rowSelect,a=e.data,n=Object(m.useDispatch)();return o.a.createElement(v.BootstrapTable,{data:a,striped:!0,hover:!0,version:"4",pagination:!0,options:{noDataText:"N\xe3o h\xe1 itens a exibir"}},o.a.createElement(v.TableHeaderColumn,{isKey:!0,dataField:"id",hidden:!0},"Id"),o.a.createElement(v.TableHeaderColumn,{dataField:"avatar_url",dataFormat:function(e,t){return o.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},o.a.createElement("img",{src:e,alt:"Perfil",style:{width:"50px",height:"50px",borderRadius:50}}))},width:"90"},"Foto"),o.a.createElement(v.TableHeaderColumn,{dataField:"name"},"Nome",o.a.createElement("br",null),o.a.createElement("input",{type:"text",style:{width:"120px"},onChange:function(e){var t=e.target.value;n(t?Object(p.a)({name:t}):Object(p.a)())}})),o.a.createElement(v.TableHeaderColumn,{dataField:"email"},"Email",o.a.createElement("br",null),o.a.createElement("input",{type:"text",style:{width:"120px"},onChange:function(e){var t=e.target.value;n(t?Object(p.a)({email:t}):Object(p.a)())}})),o.a.createElement(v.TableHeaderColumn,{dataField:"instagram",dataFormat:function(e,t){return o.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},e)}},"Instagram"),o.a.createElement(v.TableHeaderColumn,{dataField:"cpf"},"CPF",o.a.createElement("br",null),o.a.createElement("input",{type:"text",style:{width:"120px"},onChange:function(e){var t=e.target.value;n(t?Object(p.a)({cpf:t}):Object(p.a)())}})),o.a.createElement(v.TableHeaderColumn,{dataField:"contact"},"Contato",o.a.createElement("br",null),o.a.createElement("input",{type:"text",style:{width:"120px"},onChange:function(e){var t=e.target.value;n(t?Object(p.a)({contact:t}):Object(p.a)())}})),o.a.createElement(v.TableHeaderColumn,{dataField:"address",dataFormat:function(e,t){return e.street}},"Rua"),o.a.createElement(v.TableHeaderColumn,{dataField:"address",dataFormat:function(e,t){return e.neighborhood}},"Bairro"),o.a.createElement(v.TableHeaderColumn,{width:"90",dataFormat:function(e,a){return o.a.createElement("div",{className:"form-iline"},o.a.createElement(y.a,{placement:"bottom",overlay:o.a.createElement(j.a,{id:"edit"},"Ver")},o.a.createElement(F.Link,{to:"/inicio/clientes/detalhes/".concat(a._id)},o.a.createElement(w.c,{size:24}))),o.a.createElement(y.a,{placement:"bottom",overlay:o.a.createElement(j.a,{id:"edit"},"Editar")},o.a.createElement(s.a,{onClick:function(){return t(a)},variant:"link"},o.a.createElement(w.a,{size:24}),"\xa0")))}},"A\xe7\xf5es"))},x=a(21),C=a.n(x),S=a(352);t.default=Object(b.o)((function(){var e=Object(i.useState)(!1),t=Object(c.a)(e,2),a=t[0],n=t[1],b=Object(m.useSelector)((function(e){return e.client.client})),v=Object(m.useSelector)((function(e){return e.client.clients})).items,y=Object(i.useState)([]),j=Object(c.a)(y,2),w=j[0],F=j[1],x=Object(i.useState)(""),k=Object(c.a)(x,2),V=k[0],P=k[1],T=Object(i.useState)([]),I=Object(c.a)(T,2),N=I[0],R=I[1],H=Object(i.useState)(""),L=Object(c.a)(H,2),_=(L[0],L[1],Object(m.useDispatch)()),M=Object(i.useRef)(null);Object(i.useEffect)((function(){function e(){return(e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados");case 2:t=e.sent,F(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}_(Object(p.a)()),function(){e.apply(this,arguments)}()}),[_]),Object(i.useEffect)((function(){function e(){return(e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados/".concat(V,"/municipios"));case 2:t=e.sent,R(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[V]),Object(i.useEffect)((function(){if(!0===b.success&&(n(!1),M.current.setErrors({}),M.current.reset()),b.error){var e={};e[b.error.path]=b.error.message,M.current.setErrors(e)}}),[b.success,b.error]);var z=function(){var e=Object(l.a)(r.a.mark((function e(t){var n,l,c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=E.b().shape({name:E.d().required("Informe o nome do cliente"),email:E.d().email("Formato de email invalido"),cpf:E.d().required("Informe o CPF"),address:E.b().shape({street:E.d().required("Rua obrigatoria"),neighborhood:E.d().required("Bairro obrigatorio"),city:E.d().required("Cidade obrigatoria"),state:E.d().required("Estado obrigatoria")}),contact:E.d().matches(/(\(?\d{2}\)?\s)?(\d{4,5}\-\d{4})/g,"Formato incorreto").required("Informe ao menos um contato"),nasc:E.d().matches(/^([0-2][0-9]|(3)[0-1])(\/)(((0)[0-9])|((1)[0-2]))(\/)\d{4}$/i,"Formato incorreto").required("Informe a data de nascimento")}),e.next=4,Object(S.a)(t.thumbnail);case 4:return l=e.sent,e.next=7,n.validate(t,{abortEarly:!1});case 7:(c=new FormData).append("thumbnail",l||null),c.append("name",t.name),c.append("instagram",t.instagram),c.append("cpf",t.cpf),c.append("rg",t.rg),c.append("email",t.email),c.append("address",JSON.stringify(t.address)),c.append("occupation",t.occupation),c.append("contact",t.contact),c.append("nasc",t.nasc),c.append("sex",JSON.stringify(t.sex)),c.append("etnia",JSON.stringify(t.etnia)),_(a?Object(p.c)(c,t.id):Object(p.b)(c)),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),e.t0 instanceof E.a&&(i={},e.t0.inner.forEach((function(e){i[e.path]=e.message,M.current.setErrors(i)})));case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}();return b.loading?o.a.createElement(g.a,null):o.a.createElement(i.Fragment,null,o.a.createElement(u.a,null,o.a.createElement(d.a,{m4:4},o.a.createElement("p",{className:"title text-center"},"Cadastro Clientes"))),o.a.createElement(h.a,{ref:M,onSubmit:z},o.a.createElement(u.a,{className:"justify-content-center"},o.a.createElement(d.a,{md:2},o.a.createElement(f.d,{name:"thumbnail"}))),o.a.createElement(u.a,null,o.a.createElement(d.a,{md:6},o.a.createElement(f.e,{name:"id",hidden:!0}))),o.a.createElement(u.a,null,o.a.createElement(d.a,{md:6},o.a.createElement(f.e,{name:"name",label:"Nome",style:{width:"60%"},maxLength:200})),o.a.createElement(d.a,{md:3},o.a.createElement(f.e,{name:"email",label:"Email",type:"email",maxLength:50}))),o.a.createElement(u.a,null,o.a.createElement(d.a,{md:3},o.a.createElement(f.e,{name:"instagram",label:"Instagram",maxLength:50})),o.a.createElement(d.a,{md:3},o.a.createElement(f.e,{name:"cpf",label:"CPF",style:{width:"40%"},placeholder:"99999999999",maxLength:11})),o.a.createElement(d.a,{md:3},o.a.createElement(f.f,{mask:"99 99999-9999",style:{width:"40%"},name:"contact",label:"Telefone"}))),o.a.createElement(u.a,null,o.a.createElement(d.a,{md:2},o.a.createElement(f.f,{mask:"99/99/9999",name:"nasc",label:"Nasc",style:{width:"40%"}}))),o.a.createElement(u.a,null,o.a.createElement(d.a,{md:6},o.a.createElement(f.e,{name:"address.street",label:"Endere\xe7o",style:{width:"80%"},maxLength:200})),o.a.createElement(d.a,{md:3},o.a.createElement(f.e,{name:"address.neighborhood",label:"Bairro",maxLength:100}))),o.a.createElement(u.a,null,o.a.createElement(d.a,{md:2},o.a.createElement(f.h,{label:"Estado",name:"address.state",onChange:function(e){return P(e.value)},options:w.map((function(e){return{value:e.sigla,label:e.sigla}}))})),o.a.createElement(d.a,{md:3},o.a.createElement(f.h,{label:"Cidade",name:"address.city",options:N.map((function(e){return{value:e.nome,label:e.nome}}))})),o.a.createElement(d.a,{md:3},o.a.createElement(f.e,{name:"address.cep",label:"CEP",style:{width:"50%"},maxLength:9}))),o.a.createElement(u.a,null,o.a.createElement(d.a,{md:3},o.a.createElement(f.h,{label:"Sexo",name:"sex",options:[{value:0,label:"Masculino"},{value:1,label:"Feminino"}]})),o.a.createElement(d.a,{md:3},o.a.createElement(f.h,{label:"Etnia",name:"etnia",options:[{value:0,label:"Branco"},{value:1,label:"Pardo"},{value:2,label:"Negro"},{value:3,label:"Amarelo"},{value:4,label:"Indigena"}]})),o.a.createElement(d.a,{md:6},o.a.createElement(f.e,{name:"occupation",label:"Profissao",style:{width:"50%"},maxLength:50}))),o.a.createElement(u.a,null,o.a.createElement(d.a,{md:12,className:"text-right"},o.a.createElement(s.a,{type:"submit",variant:"primary"},a?"Atualizar":"Salvar"),o.a.createElement(s.a,{variant:"danger",onClick:function(){return window.location.reload()}},"Cancela")))),o.a.createElement(u.a,null,o.a.createElement(d.a,{md:12,className:"my-4"},0===v.length?o.a.createElement(g.a,null):o.a.createElement(O,{rowSelect:function(e){M.current.setErrors({}),M.current.reset(),n(!0),M.current.setFieldValue("id",e._id),M.current.setFieldValue("name",e.name),M.current.setFieldValue("instagram",e.instagram),M.current.setFieldValue("cpf",e.cpf),M.current.setFieldValue("rg",e.rg),M.current.setFieldValue("email",e.email),M.current.setFieldValue("address.street",e.address.street),M.current.setFieldValue("address.neighborhood",e.address.neighborhood),M.current.setFieldValue("address.city",e.address.city),M.current.setFieldValue("address.state",e.address.state),M.current.setFieldValue("address.cep",e.address.cep),M.current.setFieldValue("occupation",e.occupation),M.current.setFieldValue("contact",e.contact),M.current.setFieldValue("nasc",e.nasc),M.current.setFieldValue("sex",e.sex),M.current.setFieldValue("etnia",e.etnia)},data:v}))))}))}}]);
//# sourceMappingURL=13.8e327edb.chunk.js.map