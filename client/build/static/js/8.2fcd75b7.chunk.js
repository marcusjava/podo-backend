(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[8],{343:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return o}));var n=a(12),r=a(27),l=a(21),c=a.n(l),s=function(e){return function(t){return t({type:n.l}),c.a.put("/consults/".concat(e._id),e).then((function(e){t({type:n.m,payload:e.data}),r.toastr.success("Consulta atualizada com sucesso"),t(o())})).catch((function(e){t({type:n.k,payload:e.response.data}),r.toastr.error(e.response.data.message)}))}},o=function(e){return function(t){return t({type:n.i}),c.a.get("/consults",{params:e}).then((function(e){t({type:n.j,payload:e.data})})).catch((function(e){t({type:n.h,payload:e.response.data}),r.toastr.error(e.response.data.message)}))}}},344:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return u}));var n=a(12),r=a(27),l=a(21),c=a.n(l),s=function(e){return function(t){return t({type:n.r}),c.a.post("/procedures",e).then((function(e){t({type:n.s,payload:e.data}),r.toastr.success("Procedimento salvo com sucesso"),t(u())})).catch((function(e){t({type:n.q,payload:e.response.data}),r.toastr.error(e.response.data.message)}))}},o=function(e,t){return function(a){return a({type:n.r}),c.a.put("/procedures/".concat(t),e).then((function(e){a({type:n.s,payload:e.data}),r.toastr.success("Procedimento atualizado com sucesso"),a(u())})).catch((function(e){a({type:n.q,payload:e.response.data}),r.toastr.error(e.response.data.message)}))}},u=function(){return function(e){return e({type:n.o}),c.a.get("/procedures").then((function(t){e({type:n.p,payload:t.data})})).catch((function(t){e({type:n.n,payload:t.response.data})}))}}},346:function(e,t,a){e.exports=function(){"use strict";return function(e,t,a){var n=(new Date).getTimezoneOffset(),r=t.prototype;a.utc=function(e){return new t({date:e,utc:!0,args:arguments})},r.utc=function(){return a(this.toDate(),{locale:this.$L,utc:!0})},r.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=r.parse;r.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),l.call(this,e)};var c=r.init;r.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else c.call(this)};var s=r.utcOffset;r.utcOffset=function(e){var t=this.$utils().u;if(t(e))return this.$u?0:t(this.$offset)?s.call(this):this.$offset;var a,r=Math.abs(e)<=16?60*e:e;return 0!==e?(a=this.local().add(r+n,"minute")).$offset=r:a=this.utc(),a};var o=r.format;r.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return o.call(this,t)},r.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+n;return this.$d.valueOf()-6e4*e},r.isUTC=function(){return!!this.$u},r.toISOString=function(){return this.toDate().toISOString()},r.toString=function(){return this.toDate().toUTCString()};var u=r.toDate;r.toDate=function(e){return"s"===e&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():u.call(this)}}}()},356:function(e,t,a){"use strict";var n=a(41),r=a(1),l=a.n(r),c=a(345),s=a(419),o=a(339),u=a(331),i=a(193),m=a(343),d=a(138),p=a.n(d),f=a(351),E=a(43),b=a(24),h=a(157),v=a.n(h),g=a(25),y=a(42),O=a.n(y),C=a(68),D=a(27),j=a(346),Y=a.n(j),T=a(335),H=a(333),M=a(197),$=a(158),x=a(84),N=a(85),F=a(29),S=a(344),_=a(21),w=a.n(_),k=a(289);a(204);v.a.extend(Y.a);var z=function(e){var t=e.initial,a=Object(r.useState)(!1),c=Object(n.a)(a,2),s=c[0],d=c[1],p=Object(b.useSelector)((function(e){return e.client})).clients,f=Object(b.useSelector)((function(e){return e.procedure})).procedures,h=Object(b.useDispatch)(),g=Object(r.useRef)(null);Object(r.useEffect)((function(){h(Object($.a)()),h(Object(S.a)())}),[h]);var y=function(){var e=Object(C.a)(O.a.mark((function e(t){var a,n,r,l,c,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=F.b().shape({date:F.d().required("Informe a data da consulta"),client:F.d().ensure().required("Informe o cliente"),procedures:F.d().ensure().required("Informe os procedimentos"),type_consult:F.d().ensure().required("Informe o tipo de consulta")}),e.next=4,a.validate(t,{abortEarly:!1});case 4:return n={_id:t._id,date:v()(t.date).format("YYYY-MM-DDTHH:mm:ss.sssZ"),client:t.client.value,procedures:t.procedures.map((function(e){return e.value})),type_consult:t.type_consult,observations:t.observations,status:t.status},e.prev=5,e.next=8,w.a.put("/consults/".concat(n._id),n);case 8:r=e.sent,console.log(r),200===r.status&&(h(Object(m.a)()),D.toastr.success("Consulta atualizada com sucesso"),g.current.setErrors({}),g.current.reset(),d(!1)),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(5),l=e.t0.response.data,(c={})[l.path]=l.message,g.current.setErrors(c);case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(0),e.t1 instanceof F.a&&(s={},e.t1.inner.forEach((function(e){s[e.path]=e.message,g.current.setErrors(s)})));case 24:case"end":return e.stop()}}),e,null,[[0,21],[5,13]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{placement:"bottom",overlay:l.a.createElement(u.a,{id:"edit"}," Editar consulta")},l.a.createElement("button",{className:"btn btn-link",onClick:function(){return d(!0)}},l.a.createElement(E.b,{size:20}))),l.a.createElement(T.a,{size:"lg",show:s,onHide:function(){return d(!1)}},l.a.createElement(T.a.Header,{closeButton:!0},l.a.createElement(T.a.Title,null,"Editar consulta")),l.a.createElement(T.a.Body,null,l.a.createElement(x.a,{ref:g,initialData:{_id:t._id,date:Object(k.default)(t.date),client:{value:t.client._id,label:t.client.name},procedures:t.procedures.map((function(e){return{value:e._id,label:e.name}})),type_consult:t.type_consult,status:t.status,observations:t.observations},onSubmit:y},l.a.createElement(N.e,{type:"hidden",name:"_id"}),l.a.createElement(H.a,null,l.a.createElement(M.a,{md:6},l.a.createElement(N.b,{placeholderText:"Data/hora",name:"date"}))),l.a.createElement(H.a,null,l.a.createElement(M.a,{md:6},l.a.createElement(N.h,{label:"Cliente",name:"client",options:p.options,onInputChange:function(e){return function(e){e.length>=3&&h(Object($.a)({name:e})),0===e.length&&h(Object($.a)())}(e)}}))),l.a.createElement(H.a,null,l.a.createElement(M.a,{md:6},l.a.createElement(N.h,{label:"Procedimentos",isMulti:!0,name:"procedures",options:f.options}))),l.a.createElement(H.a,null,l.a.createElement(M.a,{md:3},l.a.createElement(N.h,{label:"Tipo consulta",name:"type_consult",options:[{label:"Agendada",value:0},{label:"Retorno",value:1},{label:"Urg\xeancia",value:2}]}))),l.a.createElement(H.a,null,l.a.createElement(M.a,{md:3},l.a.createElement(N.h,{label:"Status",name:"status",options:[{value:2,label:"Cancelada"},{value:3,label:"Remarcada"}]}))),l.a.createElement(H.a,null,l.a.createElement(M.a,{md:12},l.a.createElement(N.i,{rows:10,col:15,label:"Observa\xe7\xf5es",name:"observations"}))),l.a.createElement(H.a,null,l.a.createElement(M.a,{md:12,className:"text-right"},l.a.createElement(i.a,{type:"submit",variant:"primary"},"Salvar"),l.a.createElement(i.a,{variant:"danger",onClick:function(){return d(!1)}},"Cancelar")))))))},I=a(162),U=a(105);Object(d.registerLocale)("pt-br",I.a);t.a=function(e){e.client_id;var t=Object(b.useDispatch)(),a=Object(b.useSelector)((function(e){return e.consult.consults})),d=a.items,h=a.loading,y=Object(r.useState)(void 0),O=Object(n.a)(y,2),C=O[0],j=O[1],Y=Object(r.useState)(void 0),T=Object(n.a)(Y,2),H=T[0],M=T[1],$=Object(r.useState)(""),x=Object(n.a)($,2),N=x[0],F=x[1],S=Object(r.useRef)(null),_=l.a.createElement("div",{className:"form-inline"},l.a.createElement(p.a,{placeholderText:"Data Inicial",selected:C,onChange:function(e){return j(e)},fixedHeight:!0,className:"only-hour",name:"dateI",isClearable:!0,dateFormat:"dd/MM/yyyy",locale:"pt-br"}),l.a.createElement(p.a,{placeholderText:"Data Final",selected:H,onChange:function(e){return M(e)},fixedHeight:!0,className:"only-hour",name:"dateF",isClearable:!0,dateFormat:"dd/MM/yyyy",locale:"pt-br"}),l.a.createElement(i.a,{type:"button",onClick:function(e){e.preventDefault();var a=C&&v()(C).format("YYYY-MM-DDTHH:mm:ss.sssZ"),n=H&&v()(H).format("YYYY-MM-DDTHH:mm:ss.sssZ");t(Object(m.a)({start:a,end:n}))}},l.a.createElement(f.a,{size:20})));return h?l.a.createElement(U.a,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(c.BootstrapTable,{data:d,striped:!0,hover:!0,version:"4",ref:S,pagination:!0,options:{noDataText:"N\xe3o h\xe1 itens a exibir"}},l.a.createElement(c.TableHeaderColumn,{isKey:!0,dataField:"id",hidden:!0},"Id"),l.a.createElement(c.TableHeaderColumn,{dataField:"date",width:"300",dataFormat:function(e,t){return l.a.createElement("p",{className:"font-weight-bold"},v()(e).format("DD/MM/YYYY HH:mm").toString())}},"Data",l.a.createElement("br",null),_),l.a.createElement(c.TableHeaderColumn,{dataField:"client",dataFormat:function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{href:e.avatar_url,rel:"noopener noreferrer",className:"mr-1",target:"_blank"},l.a.createElement("img",{src:e.avatar_url,alt:"Perfil",style:{width:"40px",height:"40px",borderRadius:50}})),l.a.createElement(g.Link,{to:"/inicio/clientes/detalhes/".concat(e._id)},e.name))}},"Cliente",l.a.createElement("br",null),l.a.createElement("input",{type:"text",placeholder:"Digite o nome",onChange:function(e){return F(e.target.value)},onInput:function(e){var a=e.target.value,n=C&&v()(C).format("YYYY-MM-DDTHH:mm:ss.sssZ"),r=H&&v()(H).format("YYYY-MM-DDTHH:mm:ss.sssZ");a.length>=3&&t(Object(m.a)({start:n,end:r,client:N})),0===a.length&&t(Object(m.a)())},value:N})),l.a.createElement(c.TableHeaderColumn,{width:"120",dataField:"client",dataFormat:function(e,t){return l.a.createElement("label",null,e.contact)}},"Telefone"),l.a.createElement(c.TableHeaderColumn,{dataField:"procedures",dataFormat:function(e,t){return l.a.createElement("div",null,l.a.createElement("ul",{className:"list-unstyled"},e.map((function(e,t){return l.a.createElement("li",{key:t},l.a.createElement(s.a,{variant:"success"},l.a.createElement("span",{className:"font-weight-bold"},e.name)))}))))}},"Procedimentos"),l.a.createElement(c.TableHeaderColumn,{dataField:"observations"},"Observa\xe7\xf5es"),l.a.createElement(c.TableHeaderColumn,{dataField:"type_consult",width:"120",dataFormat:function(e,t){return l.a.createElement("div",null,"0"===e.value?l.a.createElement(s.a,{variant:"primary"},"Agendada"):"1"===e.value?l.a.createElement(s.a,{variant:"success"},"Retorno"):l.a.createElement(s.a,{variant:"danger"},"Urg\xeancia"))}},"Tipo consulta"),l.a.createElement(c.TableHeaderColumn,{dataField:"status",dataFormat:function(e,t){return l.a.createElement("div",null,"0"===e.value?l.a.createElement(s.a,{variant:"warning"},"Marcada"):"1"===e.value?l.a.createElement(s.a,{variant:"success"},"Realizada"):"2"===e.value?l.a.createElement(s.a,{variant:"danger"},"Cancelada"):l.a.createElement(s.a,{variant:"primary"},"Remarcada"))},width:"100",dataSort:!0},"Status"),l.a.createElement(c.TableHeaderColumn,{width:"160",dataFormat:function(e,a){return l.a.createElement("div",{className:"list-inline"},l.a.createElement(o.a,{placement:"bottom",overlay:l.a.createElement(u.a,{id:"edit"},"Cancelar Consulta")},l.a.createElement("button",{className:"btn btn-link",onClick:function(e){return function(e,a){(console.log(a),e.preventDefault(),"1"!==a.status.value)?"2"!==a.status.value?!0===window.confirm("Tem certeza que deseja cancelar a consulta?")&&(a.client=a.client._id,a.status={value:2,label:"Cancelada"},t(Object(m.b)(a))):D.toastr.error("Consulta j\xe1 se encontra cancelada!"):D.toastr.error("Consulta realizada n\xe3o pode ser cancelada!")}(e,a)}},l.a.createElement(f.b,{size:20,color:"red"}))),"2"!==a.status.value&&l.a.createElement(o.a,{placement:"bottom",overlay:l.a.createElement(u.a,{id:"edit"}," Realizar consulta")},l.a.createElement(g.Link,{to:"/inicio/consulta/".concat(a.id)},l.a.createElement(E.a,{size:20,color:"#62B3B1"}))),l.a.createElement(z,{initial:a}),"2"!==a.status.value&&"1"===a.status.value&&l.a.createElement(o.a,{placement:"bottom",overlay:l.a.createElement(u.a,{id:"edit"},"Imprimir Ficha")},l.a.createElement(g.Link,{to:"/ficha/".concat(a.id)},l.a.createElement(E.f,{size:20}))))}},"A\xe7\xf5es")))}},419:function(e,t,a){"use strict";var n=a(2),r=a(5),l=a(10),c=a.n(l),s=a(1),o=a.n(s),u=a(13),i=o.a.forwardRef((function(e,t){var a=e.bsPrefix,l=e.variant,s=e.pill,i=e.className,m=e.as,d=void 0===m?"span":m,p=Object(r.a)(e,["bsPrefix","variant","pill","className","as"]),f=Object(u.b)(a,"badge");return o.a.createElement(d,Object(n.a)({ref:t},p,{className:c()(i,f,s&&f+"-pill",l&&f+"-"+l)}))}));i.displayName="Badge",i.defaultProps={pill:!1},t.a=i},423:function(e,t,a){},477:function(e,t,a){"use strict";a.r(t);var n=a(42),r=a.n(n),l=a(68),c=a(41),s=a(1),o=a.n(s),u=a(333),i=a(197),m=a(334),d=a(22),p=a(157),f=a.n(p),E=(a(423),a(356)),b=a(105),h=a(21),v=a.n(h),g=a(24),y=a(343);t.default=function(){var e=Object(d.m)().id,t=Object(s.useState)({}),a=Object(c.a)(t,2),n=a[0],p=a[1],h=Object(g.useDispatch)();return Object(s.useEffect)((function(){function t(){return(t=Object(l.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("/clients/".concat(e));case 2:a=t.sent,p(a.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}(),h(Object(y.a)({client_id:e}))}),[e]),0===Object.entries(n).length?o.a.createElement(b.a,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{className:"justify-content-center mb-4"},o.a.createElement(i.a,{md:4,className:"text-center"},o.a.createElement(m.a,{className:"rounded-img mt-2",roundedCircle:!0,src:n.avatar_url}),o.a.createElement("p",{className:"title text-center"},n.name))),o.a.createElement(u.a,{className:"mt-4"},o.a.createElement(i.a,null,o.a.createElement("p",{className:"subtitle"},"Dados pessoais"))),o.a.createElement(u.a,{className:"mt-4"},o.a.createElement(i.a,{md:3},o.a.createElement("p",null,o.a.createElement("strong",null,"Nome")," - ",n.name)),o.a.createElement(i.a,{md:3},o.a.createElement("p",null,o.a.createElement("strong",null,"Email")," - ",n.email)),o.a.createElement(i.a,{md:3},o.a.createElement("p",null,o.a.createElement("strong",null,"Contato")," - ",n.contact))),o.a.createElement(u.a,null,o.a.createElement(i.a,{md:3},o.a.createElement("p",null,o.a.createElement("strong",null,"CPF")," - ",n.cpf)),o.a.createElement(i.a,{md:3},o.a.createElement("p",null,o.a.createElement("strong",null,"RG")," - ",n.rg)),o.a.createElement(i.a,{md:3},o.a.createElement("p",null,o.a.createElement("strong",null,"Sexo")," - ",n.sex&&n.sex.label)),o.a.createElement(i.a,{md:3},o.a.createElement("p",null,o.a.createElement("strong",null,"Ocupa\xe7\xe3o")," - ",n.occupation))),o.a.createElement(u.a,null,o.a.createElement(i.a,{md:3},o.a.createElement("p",null,o.a.createElement("strong",null,"Endere\xe7o")," - ",n.address&&n.address.street)),o.a.createElement(i.a,{md:3},o.a.createElement("p",null,o.a.createElement("strong",null,"Bairro")," - ",n.address&&n.address.neighborhood)),o.a.createElement(i.a,{md:3},o.a.createElement("p",null,o.a.createElement("strong",null,"Cidade")," - ",n.address&&n.address.city.label)),o.a.createElement(i.a,{md:3},o.a.createElement("p",null,o.a.createElement("strong",null,"Estado")," - ",n.address&&n.address.state.label))),o.a.createElement(u.a,{className:"mb-4"},o.a.createElement(i.a,{md:6},o.a.createElement("p",null,o.a.createElement("strong",null,"Criado em")," - ",f()(n.createdAt).format("DD/MM/YYYY HH:mm")," por"," ",n.createdBy&&n.createdBy.name)),o.a.createElement(i.a,{md:6},o.a.createElement("p",null,o.a.createElement("strong",null,"Atualizado em")," - ",f()(n.updatedAt).format("DD/MM/YYYY HH:mm")," por"," ",n.updatedBy&&n.updatedBy.name))),o.a.createElement(u.a,null,o.a.createElement(i.a,null,o.a.createElement("p",{className:"subtitle"},"Consultas"))),o.a.createElement(u.a,{className:"mt-4"},o.a.createElement(i.a,{md:12},o.a.createElement(E.a,null))))}}}]);
//# sourceMappingURL=8.2fcd75b7.chunk.js.map