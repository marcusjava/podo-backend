(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[10],{344:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return u}));var r=a(12),n=a(27),c=a(21),o=a.n(c),s=function(e){return function(t){return t({type:r.r}),o.a.post("/procedures",e).then((function(e){t({type:r.s,payload:e.data}),n.toastr.success("Procedimento salvo com sucesso"),t(u())})).catch((function(e){t({type:r.q,payload:e.response.data}),n.toastr.error(e.response.data.message)}))}},i=function(e,t){return function(a){return a({type:r.r}),o.a.put("/procedures/".concat(t),e).then((function(e){a({type:r.s,payload:e.data}),n.toastr.success("Procedimento atualizado com sucesso"),a(u())})).catch((function(e){a({type:r.q,payload:e.response.data}),n.toastr.error(e.response.data.message)}))}},u=function(){return function(e){return e({type:r.o}),o.a.get("/procedures").then((function(t){e({type:r.p,payload:t.data})})).catch((function(t){e({type:r.n,payload:t.response.data})}))}}},422:function(e,t,a){},481:function(e,t,a){"use strict";a.r(t);var r=a(42),n=a.n(r),c=a(68),o=a(41),s=a(1),i=a.n(s),u=a(333),l=a(197),d=a(193),p=a(84),m=a(29),f=a(85),b=a(345),v=a(24),E=a(344),y=(a(422),function(e){var t=e.rowSelect,a=Object(v.useSelector)((function(e){return e.procedure.procedures})).items,r=Object(v.useDispatch)();Object(s.useEffect)((function(){r(Object(E.a)())}),[r]);var n={mode:"radio",clickToSelect:!1,onSelect:function(e){return t(e)}};return i.a.createElement(b.BootstrapTable,{data:a,striped:!0,hover:!0,version:"4",selectRow:n,pagination:!0,options:{noDataText:"N\xe3o h\xe1 itens a exibir"}},i.a.createElement(b.TableHeaderColumn,{isKey:!0,dataField:"_id",hidden:!0},"Id"),i.a.createElement(b.TableHeaderColumn,{dataField:"name",filter:{type:"TextFilter",delay:1e3},dataSort:!0},"Procedimento"),i.a.createElement(b.TableHeaderColumn,{dataField:"service",filter:{type:"TextFilter",delay:1e3},dataSort:!0,dataFormat:function(e,t){return e.description},width:"180px"},"Servi\xe7o"),i.a.createElement(b.TableHeaderColumn,{dataField:"description"},"Descri\xe7\xe3o"))}),h=a(12),j=(a(27),a(21)),O=a.n(j),S=function(){return function(e){return e({type:h.u}),O.a.get("/services").then((function(t){e({type:h.v,payload:t.data})})).catch((function(t){e({type:h.t,payload:t.response.data})}))}};t.default=function(){var e=Object(s.useState)(!1),t=Object(o.a)(e,2),a=t[0],r=t[1],b=Object(v.useSelector)((function(e){return e.procedure.procedure})),h=Object(v.useSelector)((function(e){return e.service.services})),j=Object(v.useDispatch)(),O=Object(s.useRef)(null);Object(s.useEffect)((function(){j(S())}),[j]);Object(s.useEffect)((function(){if(!0===b.success&&(r(!1),O.current.setErrors({}),O.current.reset()),b.error){var e={};e[b.error.path]=b.error.message,O.current.setErrors(e)}}),[b.success,b.error]);var g=function(){var e=Object(c.a)(n.a.mark((function e(t){var r,c,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=m.b().shape({service:m.d().ensure().required("Campo obrigatorio"),name:m.d().required("Preencha o procedimento")}),e.next=4,r.validate(t,{abortEarly:!1});case 4:c={service:t.service.value,name:t.name,description:t.description},j(a?Object(E.c)(c,t._id):Object(E.b)(c)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0 instanceof m.a&&(o={},e.t0.inner.forEach((function(e){o[e.path]=e.message,O.current.setErrors(o)})));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,null,i.a.createElement(l.a,{m4:4},i.a.createElement("p",{className:"title text-center"},"Cadastro Procedimentos"))),i.a.createElement(p.a,{ref:O,onSubmit:g},i.a.createElement(u.a,{className:"mt-4"},i.a.createElement(l.a,{md:3},i.a.createElement(f.h,{name:"service",label:"Servi\xe7o",options:h.options}))),i.a.createElement(u.a,null,i.a.createElement(l.a,{md:4},i.a.createElement(f.e,{name:"name",label:"Procedimento"}))),i.a.createElement(u.a,null,i.a.createElement(l.a,{md:6},i.a.createElement(f.i,{name:"description",label:"Descri\xe7\xe3o",rows:"8"}))),i.a.createElement(u.a,null,i.a.createElement(l.a,{md:6,className:"text-right"},i.a.createElement(d.a,{type:"submit",variant:"primary"},a?"Atualizar":"Salvar"),i.a.createElement(d.a,{variant:"danger",onClick:function(){return window.location.reload()}},"Cancela")))),i.a.createElement(u.a,{className:"my-4"},i.a.createElement(l.a,{md:12},i.a.createElement(y,{rowSelect:function(e){r(!0),O.current.setData({service:{value:e.service._id,label:e.service.description},name:e.name,description:e.description})}}))))}}}]);
//# sourceMappingURL=10.b32c5a78.chunk.js.map