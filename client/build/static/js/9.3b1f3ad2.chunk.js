(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[9],{347:function(e,a,t){"use strict";var r=t(1),n=t.n(r);t(348);a.a=function(e){var a=e.show;return!0===(void 0!==a&&a)&&n.a.createElement("div",{id:"cover-spin"})}},348:function(e,a,t){},358:function(e,a,t){"use strict";var r=t(359),n=t.n(r);a.a=function(e){return new Promise((function(a){n.a.imageFileResizer(e,3280,2464,"JPEG",100,0,(function(e){a(e)}),"blob")}))}},359:function(e,a){e.exports=function(e){var a={};function t(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=e,t.c=a,t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var n in e)t.d(r,n,function(a){return e[a]}.bind(null,n));return r},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="",t(t.s=0)}([function(e,a,t){"use strict";function r(e,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.r(a);var n=function(){function e(){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e)}var a,t;return a=e,t=[{key:"changeHeightWidth",value:function(e,a,t,r,n,l){return t>r&&(e=Math.round(e*r/t),t=r),e>a&&(t=Math.round(t*a/e),e=a),n&&t<n&&(e=Math.round(e*n/t),t=n),l&&e<l&&(t=Math.round(t*l/e),e=l),{height:e,width:t}}},{key:"resizeAndRotateImage",value:function(e,a,t,r,n){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"jpeg",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=i/100,d=document.createElement("canvas"),c=e.width,u=e.height,m=this.changeHeightWidth(u,t,c,a,r,n);!o||90!==o&&270!==o?(d.width=m.width,d.height=m.height):(d.width=m.height,d.height=m.width),c=m.width,u=m.height;var p=d.getContext("2d");return o&&(p.rotate(o*Math.PI/180),90===o?p.translate(0,-d.width):180===o?p.translate(-d.width,-d.height):270===o?p.translate(-d.height,0):0!==o&&360!==o||p.translate(0,0)),p.drawImage(e,0,0,c,u),d.toDataURL("image/".concat(l),s)}},{key:"b64toBlob",value:function(e,a){a=a||"image/jpeg";for(var t=atob(e.toString().replace(/^data:image\/(png|jpeg|jpg);base64,/,"")),r=[],n=0;n<t.length;n+=512){for(var l=t.slice(n,n+512),i=new Array(l.length),o=0;o<l.length;o++)i[o]=l.charCodeAt(o);var s=new Uint8Array(i);r.push(s)}return new Blob(r,{type:a})}},{key:"createResizedImage",value:function(a,t,r,n,l,i,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"base64",d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,u=null,m=new FileReader;a?(m.readAsDataURL(a),m.onload=function(){var a=new Image;a.src=m.result,a.onload=function(){var m=e.resizeAndRotateImage(a,t,r,d,c,n,l,i);u=e.b64toBlob(m,"image/".concat(n)),o("blob"===s?u:m)}},m.onerror=function(e){o(e)}):o("File Not Found")}}],null&&r(a.prototype,null),t&&r(a,t),e}();a.default={imageFileResizer:function(e,a,t,r,l,i,o,s,d,c){return n.createResizedImage(e,a,t,r,l,i,o,s,d,c)}}}])},426:function(e,a,t){},486:function(e,a,t){"use strict";t.r(a);var r=t(63),n=t.n(r),l=t(83),i=t(52),o=t(1),s=t.n(o),d=(t(426),t(335)),c=t(200),u=t(196),m=t(105),p=t(45),f=t(349),h=t(341),b=t(333),g=t(137),E=t(10),v=t.n(E),y=t(46),w=t(27),x=t(106),F=t(351),j=function(e){var a=e.rowSelect,t=Object(w.useSelector)((function(e){return e.user.users})),r=t.items,n=t.loading,l=Object(w.useDispatch)();Object(o.useEffect)((function(){l(Object(y.b)())}),[l]);return n?s.a.createElement(x.a,null):s.a.createElement(f.BootstrapTable,{data:r,striped:!0,hover:!0,version:"4",pagination:!0,options:{noDataText:"N\xe3o h\xe1 itens a exibir"}},s.a.createElement(f.TableHeaderColumn,{isKey:!0,dataField:"id",hidden:!0},"Id"),s.a.createElement(f.TableHeaderColumn,{dataField:"avatar_url",dataFormat:function(e,a){return s.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{src:e,alt:"Perfil",style:{width:"50px",height:"50px",borderRadius:50}}))},width:"90"},"Foto"),s.a.createElement(f.TableHeaderColumn,{dataField:"name",dataSort:!0},"Nome",s.a.createElement("br",null),s.a.createElement("input",{type:"text",style:{width:"140px"},className:"filter text-filter form-control",onChange:function(e){var a=e.target.value;l(a?Object(y.b)({name:a}):Object(y.b)())}})),s.a.createElement(f.TableHeaderColumn,{dataField:"email",dataSort:!0},"Email",s.a.createElement("br",null),s.a.createElement("input",{type:"text",className:"filter text-filter form-control",style:{width:"140px"},onChange:function(e){var a=e.target.value;l(a?Object(y.b)({email:a}):Object(y.b)())}})),s.a.createElement(f.TableHeaderColumn,{dataField:"phone",width:"120"},"Contato",s.a.createElement("br",null),s.a.createElement("input",{type:"text",className:"filter text-filter form-control",style:{width:"100px"},onChange:function(e){var a=e.target.value;l(a?Object(y.b)({contact:a}):Object(y.b)())}})),s.a.createElement(f.TableHeaderColumn,{dataField:"address",dataFormat:function(e,a){return e.street}},"Rua"),s.a.createElement(f.TableHeaderColumn,{dataField:"address",dataFormat:function(e,a){return e.neighborhood}},"Bairro"),s.a.createElement(f.TableHeaderColumn,{dataField:"address",dataFormat:function(e,a){return e.city}},"Cidade"),s.a.createElement(f.TableHeaderColumn,{dataField:"address",dataFormat:function(e,a){return e.state},width:"90"},"Estado"),s.a.createElement(f.TableHeaderColumn,{dataField:"status",width:"90",dataFormat:function(e,a){return s.a.createElement("span",{className:v()({badge:!0,"badge-primary":"0"===e.value,"badge-danger":"1"===e.value})},e.label)}},"Status"),s.a.createElement(f.TableHeaderColumn,{dataFormat:function(e,t){return s.a.createElement("div",{className:"form-inline"},s.a.createElement(g.g,{id:t.id}),";",s.a.createElement(h.a,{placement:"bottom",overlay:s.a.createElement(b.a,{id:"edit"},"Editar")},s.a.createElement(u.a,{onClick:function(){return a(t)},variant:"link"},s.a.createElement(F.a,{size:24}),"\xa0")))},width:"90"},"A\xe7\xf5es"))},C=t(358),O=t(347),N=t(68);a.default=function(){var e=Object(o.useState)(!1),a=Object(i.a)(e,2),t=a[0],r=a[1],f=Object(o.useState)(!0),h=Object(i.a)(f,2),b=h[0],E=h[1],v=Object(o.useRef)(null),x=Object(w.useSelector)((function(e){return e.user.user})),F=x.success,S=x.error,k=x.loading,R=Object(w.useDispatch)();Object(o.useEffect)((function(){if(!0===F&&(r(!1),N.toastr.success("Usuario salvo com sucesso"),v.current.setErrors({}),v.current.reset()),Object.keys(S).length>0){var e={};e[S.path]=S.message,v.current.setErrors(e)}}),[F,S]);var q=function(){var e=Object(l.a)(n.a.mark((function e(a,r){var l,i,o,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.reset,console.log(a),e.prev=2,l=b?p.b().shape({name:p.d().required("Nome obrigatorio"),email:p.d().email("Formato incorreto!").required("Email obrigatorio!"),cpf:p.d().required("Informe o cpf"),address:p.b().shape({street:p.d().required("Rua obrigatoria"),neighborhood:p.d().required("Bairro obrigatorio"),city:p.d().required("Cidade obrigatoria"),state:p.d().required("Estado obrigatoria")}),password:p.d().required("Senha obrigatoria!").oneOf([p.c("password2"),null],"Senhas n\xe3o conferem!"),password2:p.d().required("Informe confirma\xe7\xe3o de senha")}):p.b().shape({name:p.d().required("Nome obrigatorio"),email:p.d().email("Formato incorreto!").required("Email obrigatorio!"),cpf:p.d().required("Informe o cpf"),address:p.b().shape({street:p.d().required("Rua obrigatoria"),neighborhood:p.d().required("Bairro obrigatorio"),city:p.d().required("Cidade obrigatoria"),state:p.d().required("Estado obrigatoria")})}),e.next=6,l.validate(a,{abortEarly:!1});case 6:return e.next=8,Object(C.a)(a.thumbnail);case 8:i=e.sent,(o=new FormData).append("thumbnail",i||null),o.append("name",a.name),o.append("phone",a.phone),o.append("nasc",a.nasc),o.append("cpf",a.cpf),o.append("rg",a.rg),o.append("email",a.email),o.append("address",JSON.stringify(a.address)),b&&(o.append("password",a.password),o.append("password2",a.password2)),o.append("role",JSON.stringify(a.role)),o.append("status",JSON.stringify(a.status)),R(t?Object(y.g)(o,a._id):Object(y.e)(o)),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),e.t0 instanceof p.a&&(s={},e.t0.inner.forEach((function(e){s[e.path]=e.message,v.current.setErrors(s)})));case 27:case"end":return e.stop()}}),e,null,[[2,24]])})));return function(a,t){return e.apply(this,arguments)}}();return s.a.createElement(o.Fragment,null,s.a.createElement(O.a,{show:k}),s.a.createElement(d.a,null,s.a.createElement(c.a,{m4:4},s.a.createElement("p",{className:"title text-center"},"Cadastro Usuarios"))),s.a.createElement(m.a,{ref:v,onSubmit:q,autoComplete:"off"},s.a.createElement(d.a,{className:"justify-content-center"},s.a.createElement(c.a,{md:2},s.a.createElement(g.d,{name:"thumbnail"}))),s.a.createElement(d.a,null,s.a.createElement(c.a,{md:6},s.a.createElement(g.e,{name:"_id",hidden:!0}),s.a.createElement(g.e,{name:"name",label:"Nome",style:{width:"80%"},maxLength:150})),s.a.createElement(c.a,{md:6,className:"d-inline-flex "},s.a.createElement(g.f,{name:"phone",label:"Contato",mask:"99 99999-9999",style:{width:"200px",marginRight:"5px"}}),s.a.createElement(g.f,{label:"CPF",mask:"99999999999",name:"cpf",style:{width:"80%"}}))),s.a.createElement(d.a,null,s.a.createElement(c.a,{md:6,className:"d-inline-flex"},s.a.createElement(g.f,{name:"rg",label:"RG",mask:"99999999",style:{width:"180px",marginRight:"25px"}}),s.a.createElement(g.f,{name:"nasc",mask:"99/99/9999",style:{width:"200px"},label:"Nascimento"}))),s.a.createElement(d.a,null,s.a.createElement(c.a,{md:6},s.a.createElement(g.e,{name:"email",type:"email",label:"Email",style:{width:"50%"},maxLength:100})),s.a.createElement(c.a,{md:6,className:"d-inline-flex"},s.a.createElement(g.a,{name:"role.Administrador",label:"Administrador"}),s.a.createElement(g.a,{name:"role.Usuario",label:"Usuario"}))),s.a.createElement(d.a,null,s.a.createElement(c.a,{md:6,className:"d-inline-flex"},s.a.createElement(g.e,{name:"address.street",style:{width:"340px",marginRight:"5px"},label:"Rua",maxLength:100}),s.a.createElement(g.e,{name:"address.neighborhood",style:{width:"280px"},label:"Bairro",maxLength:70})),s.a.createElement(c.a,{md:6,className:"d-inline-flex "},s.a.createElement(g.e,{name:"address.city",style:{width:"280px",marginRight:"5px"},label:"Cidade",maxLength:70}),s.a.createElement(g.e,{name:"address.state",style:{width:"50px"},label:"Estado",maxLength:2}))),s.a.createElement(d.a,null,s.a.createElement(c.a,{md:6,className:"d-inline-flex "},s.a.createElement(g.e,{name:"address.cep",style:{width:"160px",marginRight:"5px"},label:"CEP"})),s.a.createElement(c.a,{md:2},s.a.createElement(g.h,{label:"Status",name:"status",style:{width:200},options:[{value:0,label:"Ativo"},{value:1,label:"Inativo"}]})),s.a.createElement(c.a,null,s.a.createElement("input",{style:{display:"none"},type:"text",name:"fakeusernameremembered"}))),s.a.createElement(d.a,null,b?s.a.createElement(c.a,{md:6,className:"d-inline-flex"},s.a.createElement(g.e,{autoComplete:"off",name:"password",type:"password",style:{width:"200px",marginRight:"10px"},label:"Senha"}),s.a.createElement(g.e,{autoComplete:"off",name:"password2",type:"password",style:{width:"200px"},label:"Confirma Senha"}),t&&b&&s.a.createElement("button",{className:"btn btn-link",onClick:function(){return E(!1)}},"Cancelar")):s.a.createElement("button",{className:"btn btn-link",onClick:function(){return E(!0)}},"Alterar senha")),s.a.createElement(d.a,null,s.a.createElement(c.a,{md:6}),s.a.createElement(c.a,{md:6,className:"text-right"},s.a.createElement(u.a,{type:"submit",variant:"primary"},t?"Atualizar":"Salvar"),s.a.createElement(u.a,{variant:"danger",onClick:function(){return window.location.reload()}},"Cancelar")),s.a.createElement(c.a,{md:6}))),s.a.createElement(d.a,null,s.a.createElement(c.a,{md:12,className:"my-4"},s.a.createElement(j,{rowSelect:function(e){r(!0),E(!1),v.current.setFieldValue("_id",e.id),v.current.setFieldValue("name",e.name),v.current.setFieldValue("phone",e.phone),v.current.setFieldValue("cpf",e.cpf),v.current.setFieldValue("email",e.email),v.current.setFieldValue("rg",e.rg),v.current.setFieldValue("nasc",e.nasc),v.current.setFieldValue("role.Administrador",e.role.Administrador),v.current.setFieldValue("role.Usuario",e.role.Usuario),v.current.setFieldValue("address.street",e.address.street),v.current.setFieldValue("address.neighborhood",e.address.neighborhood),v.current.setFieldValue("address.city",e.address.city),v.current.setFieldValue("address.state",e.address.state),v.current.setFieldValue("address.cep",e.address.cep),v.current.setFieldValue("address.nasc",e.address.nasc),v.current.setFieldValue("status",e.status)}}))))}}}]);
//# sourceMappingURL=9.3b1f3ad2.chunk.js.map