(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[9],{347:function(e,t,a){"use strict";var r=a(1),n=a.n(r);a(348);t.a=function(e){var t=e.show;return!0===(void 0!==t&&t)&&n.a.createElement("div",{id:"cover-spin"})}},348:function(e,t,a){},358:function(e,t,a){"use strict";var r=a(359),n=a.n(r);t.a=function(e){return new Promise((function(t){n.a.imageFileResizer(e,3280,2464,"JPEG",100,0,(function(e){t(e)}),"blob")}))}},359:function(e,t){e.exports=function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}a.r(t);var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a;return t=e,a=[{key:"changeHeightWidth",value:function(e,t,a,r,n,l){return a>r&&(e=Math.round(e*r/a),a=r),e>t&&(a=Math.round(a*t/e),e=t),n&&a<n&&(e=Math.round(e*n/a),a=n),l&&e<l&&(a=Math.round(a*l/e),e=l),{height:e,width:a}}},{key:"resizeAndRotateImage",value:function(e,t,a,r,n){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"jpeg",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=i/100,d=document.createElement("canvas"),c=e.width,u=e.height,m=this.changeHeightWidth(u,a,c,t,r,n);!o||90!==o&&270!==o?(d.width=m.width,d.height=m.height):(d.width=m.height,d.height=m.width),c=m.width,u=m.height;var p=d.getContext("2d");return o&&(p.rotate(o*Math.PI/180),90===o?p.translate(0,-d.width):180===o?p.translate(-d.width,-d.height):270===o?p.translate(-d.height,0):0!==o&&360!==o||p.translate(0,0)),p.drawImage(e,0,0,c,u),d.toDataURL("image/".concat(l),s)}},{key:"b64toBlob",value:function(e,t){t=t||"image/jpeg";for(var a=atob(e.toString().replace(/^data:image\/(png|jpeg|jpg);base64,/,"")),r=[],n=0;n<a.length;n+=512){for(var l=a.slice(n,n+512),i=new Array(l.length),o=0;o<l.length;o++)i[o]=l.charCodeAt(o);var s=new Uint8Array(i);r.push(s)}return new Blob(r,{type:t})}},{key:"createResizedImage",value:function(t,a,r,n,l,i,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"base64",d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,u=null,m=new FileReader;t?(m.readAsDataURL(t),m.onload=function(){var t=new Image;t.src=m.result,t.onload=function(){var m=e.resizeAndRotateImage(t,a,r,d,c,n,l,i);u=e.b64toBlob(m,"image/".concat(n)),o("blob"===s?u:m)}},m.onerror=function(e){o(e)}):o("File Not Found")}}],null&&r(t.prototype,null),a&&r(t,a),e}();t.default={imageFileResizer:function(e,t,a,r,l,i,o,s,d,c){return n.createResizedImage(e,t,a,r,l,i,o,s,d,c)}}}])},426:function(e,t,a){},486:function(e,t,a){"use strict";a.r(t);var r=a(62),n=a.n(r),l=a(83),i=a(52),o=a(1),s=a.n(o),d=(a(426),a(335)),c=a(201),u=a(197),m=a(105),p=a(45),f=a(349),h=a(341),b=a(333),g=a(136),E=a(10),v=a.n(E),y=a(46),w=a(27),x=a(106),F=a(161),j=function(e){var t=e.rowSelect,a=Object(w.useSelector)((function(e){return e.user.users})),r=a.items,n=a.loading,l=Object(w.useDispatch)();Object(o.useEffect)((function(){l(Object(y.b)())}),[l]);return n?s.a.createElement(x.a,null):s.a.createElement(f.BootstrapTable,{data:r,striped:!0,hover:!0,version:"4",pagination:!0,options:{noDataText:"N\xe3o h\xe1 itens a exibir"}},s.a.createElement(f.TableHeaderColumn,{isKey:!0,dataField:"id",hidden:!0},"Id"),s.a.createElement(f.TableHeaderColumn,{dataField:"avatar_url",dataFormat:function(e,t){return s.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{src:e,alt:"Perfil",style:{width:"50px",height:"50px",borderRadius:50}}))},width:"90"},"Foto"),s.a.createElement(f.TableHeaderColumn,{dataField:"name",dataSort:!0},"Nome",s.a.createElement("br",null),s.a.createElement("input",{type:"text",style:{width:"140px"},className:"filter text-filter form-control",onChange:function(e){var t=e.target.value;l(t?Object(y.b)({name:t}):Object(y.b)())}})),s.a.createElement(f.TableHeaderColumn,{dataField:"email",dataSort:!0},"Email",s.a.createElement("br",null),s.a.createElement("input",{type:"text",className:"filter text-filter form-control",style:{width:"140px"},onChange:function(e){var t=e.target.value;l(t?Object(y.b)({email:t}):Object(y.b)())}})),s.a.createElement(f.TableHeaderColumn,{dataField:"phone",width:"120"},"Contato",s.a.createElement("br",null),s.a.createElement("input",{type:"text",className:"filter text-filter form-control",style:{width:"100px"},onChange:function(e){var t=e.target.value;l(t?Object(y.b)({contact:t}):Object(y.b)())}})),s.a.createElement(f.TableHeaderColumn,{dataField:"address",dataFormat:function(e,t){return e.street}},"Rua"),s.a.createElement(f.TableHeaderColumn,{dataField:"address",dataFormat:function(e,t){return e.neighborhood}},"Bairro"),s.a.createElement(f.TableHeaderColumn,{dataField:"address",dataFormat:function(e,t){return e.city}},"Cidade"),s.a.createElement(f.TableHeaderColumn,{dataField:"address",dataFormat:function(e,t){return e.state},width:"90"},"Estado"),s.a.createElement(f.TableHeaderColumn,{dataField:"status",width:"90",dataFormat:function(e,t){return s.a.createElement("span",{className:v()({badge:!0,"badge-primary":"0"===e.value,"badge-danger":"1"===e.value})},e.label)}},"Status"),s.a.createElement(f.TableHeaderColumn,{dataFormat:function(e,a){return s.a.createElement("div",{className:"form-inline"},s.a.createElement(g.g,{id:a.id}),s.a.createElement(h.a,{placement:"bottom",overlay:s.a.createElement(b.a,{id:"edit"},"Editar")},s.a.createElement(u.a,{onClick:function(){return t(a)},variant:"link"},s.a.createElement(F.b,{size:24}),"\xa0")))},width:"90"},"A\xe7\xf5es"))},C=a(358),O=a(347),N=a(68);t.default=function(){var e=Object(o.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1],f=Object(o.useState)(!0),h=Object(i.a)(f,2),b=h[0],E=h[1],v=Object(o.useRef)(null),x=Object(w.useSelector)((function(e){return e.user.user})),F=x.success,S=x.error,R=x.loading,k=Object(w.useDispatch)();Object(o.useEffect)((function(){return function(){k({type:"CLEAR_USER_STATE"})}}),[]),Object(o.useEffect)((function(){if(!0===F&&(r(!1),N.toastr.success("Usuario salvo com sucesso"),v.current.setErrors({}),v.current.reset()),Object.keys(S).length>0){var e={};e[S.path]=S.message,v.current.setErrors(e)}}),[F,S]);var T=function(){var e=Object(l.a)(n.a.mark((function e(t,r){var l,i,o,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.reset,console.log(t),e.prev=2,l=b?p.b().shape({name:p.d().required("Nome obrigatorio"),email:p.d().email("Formato incorreto!").required("Email obrigatorio!"),cpf:p.d().required("Informe o cpf"),address:p.b().shape({street:p.d().required("Rua obrigatoria"),neighborhood:p.d().required("Bairro obrigatorio"),city:p.d().required("Cidade obrigatoria"),state:p.d().required("Estado obrigatoria")}),password:p.d().required("Senha obrigatoria!").oneOf([p.c("password2"),null],"Senhas n\xe3o conferem!"),password2:p.d().required("Informe confirma\xe7\xe3o de senha")}):p.b().shape({name:p.d().required("Nome obrigatorio"),email:p.d().email("Formato incorreto!").required("Email obrigatorio!"),cpf:p.d().required("Informe o cpf"),address:p.b().shape({street:p.d().required("Rua obrigatoria"),neighborhood:p.d().required("Bairro obrigatorio"),city:p.d().required("Cidade obrigatoria"),state:p.d().required("Estado obrigatoria")})}),e.next=6,l.validate(t,{abortEarly:!1});case 6:return e.next=8,Object(C.a)(t.thumbnail);case 8:i=e.sent,(o=new FormData).append("thumbnail",i||null),o.append("name",t.name),o.append("phone",t.phone),o.append("nasc",t.nasc),o.append("cpf",t.cpf),o.append("rg",t.rg),o.append("email",t.email),o.append("address",JSON.stringify(t.address)),b&&(o.append("password",t.password),o.append("password2",t.password2)),o.append("role",JSON.stringify(t.role)),o.append("status",JSON.stringify(t.status)),k(a?Object(y.g)(o,t._id):Object(y.e)(o)),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),e.t0 instanceof p.a&&(s={},e.t0.inner.forEach((function(e){s[e.path]=e.message,v.current.setErrors(s)})));case 27:case"end":return e.stop()}}),e,null,[[2,24]])})));return function(t,a){return e.apply(this,arguments)}}();return s.a.createElement(o.Fragment,null,s.a.createElement(O.a,{show:R}),s.a.createElement(d.a,null,s.a.createElement(c.a,{m4:4},s.a.createElement("p",{className:"title text-center"},"Cadastro Usuarios"))),s.a.createElement(m.a,{ref:v,onSubmit:T,autoComplete:"off"},s.a.createElement(d.a,{className:"justify-content-center"},s.a.createElement(c.a,{md:2},s.a.createElement(g.d,{name:"thumbnail"}))),s.a.createElement(d.a,null,s.a.createElement(c.a,{md:6},s.a.createElement(g.e,{name:"_id",hidden:!0}),s.a.createElement(g.e,{name:"name",label:"Nome",style:{width:"80%"},maxLength:150})),s.a.createElement(c.a,{md:6,className:"d-inline-flex "},s.a.createElement(g.f,{name:"phone",label:"Contato",mask:"99 99999-9999",style:{width:"200px",marginRight:"5px"}}),s.a.createElement(g.f,{label:"CPF",mask:"99999999999",name:"cpf",style:{width:"80%"}}))),s.a.createElement(d.a,null,s.a.createElement(c.a,{md:6,className:"d-inline-flex"},s.a.createElement(g.f,{name:"rg",label:"RG",mask:"99999999",style:{width:"180px",marginRight:"25px"}}),s.a.createElement(g.f,{name:"nasc",mask:"99/99/9999",style:{width:"200px"},label:"Nascimento"}))),s.a.createElement(d.a,null,s.a.createElement(c.a,{md:6},s.a.createElement(g.e,{name:"email",type:"email",label:"Email",style:{width:"50%"},maxLength:100})),s.a.createElement(c.a,{md:6,className:"d-inline-flex"},s.a.createElement(g.a,{name:"role.Administrador",label:"Administrador"}),s.a.createElement(g.a,{name:"role.Usuario",label:"Usuario"}))),s.a.createElement(d.a,null,s.a.createElement(c.a,{md:6,className:"d-inline-flex"},s.a.createElement(g.e,{name:"address.street",style:{width:"340px",marginRight:"5px"},label:"Rua",maxLength:100}),s.a.createElement(g.e,{name:"address.neighborhood",style:{width:"280px"},label:"Bairro",maxLength:70})),s.a.createElement(c.a,{md:6,className:"d-inline-flex "},s.a.createElement(g.e,{name:"address.city",style:{width:"280px",marginRight:"5px"},label:"Cidade",maxLength:70}),s.a.createElement(g.e,{name:"address.state",style:{width:"50px"},label:"Estado",maxLength:2}))),s.a.createElement(d.a,null,s.a.createElement(c.a,{md:6,className:"d-inline-flex "},s.a.createElement(g.e,{name:"address.cep",style:{width:"160px",marginRight:"5px"},label:"CEP"})),s.a.createElement(c.a,{md:2},s.a.createElement(g.h,{label:"Status",name:"status",style:{width:200},options:[{value:0,label:"Ativo"},{value:1,label:"Inativo"}]})),s.a.createElement(c.a,null,s.a.createElement("input",{style:{display:"none"},type:"text",name:"fakeusernameremembered"}))),s.a.createElement(d.a,null,b?s.a.createElement(c.a,{md:6,className:"d-inline-flex"},s.a.createElement(g.e,{autoComplete:"off",name:"password",type:"password",style:{width:"200px",marginRight:"10px"},label:"Senha"}),s.a.createElement(g.e,{autoComplete:"off",name:"password2",type:"password",style:{width:"200px"},label:"Confirma Senha"}),a&&b&&s.a.createElement("button",{className:"btn btn-link",onClick:function(){return E(!1)}},"Cancelar")):s.a.createElement("button",{className:"btn btn-link",onClick:function(){return E(!0)}},"Alterar senha")),s.a.createElement(d.a,null,s.a.createElement(c.a,{md:6}),s.a.createElement(c.a,{md:6,className:"text-right"},s.a.createElement(u.a,{type:"submit",variant:"primary"},a?"Atualizar":"Salvar"),s.a.createElement(u.a,{variant:"danger",onClick:function(){return window.location.reload()}},"Cancelar")),s.a.createElement(c.a,{md:6}))),s.a.createElement(d.a,null,s.a.createElement(c.a,{md:12,className:"my-4"},s.a.createElement(j,{rowSelect:function(e){r(!0),E(!1),v.current.setFieldValue("_id",e.id),v.current.setFieldValue("thumbnail",e.avatar_url),v.current.setFieldValue("name",e.name),v.current.setFieldValue("phone",e.phone),v.current.setFieldValue("cpf",e.cpf),v.current.setFieldValue("email",e.email),v.current.setFieldValue("rg",e.rg),v.current.setFieldValue("nasc",e.nasc),v.current.setFieldValue("role.Administrador",e.role.Administrador),v.current.setFieldValue("role.Usuario",e.role.Usuario),v.current.setFieldValue("address.street",e.address.street),v.current.setFieldValue("address.neighborhood",e.address.neighborhood),v.current.setFieldValue("address.city",e.address.city),v.current.setFieldValue("address.state",e.address.state),v.current.setFieldValue("address.cep",e.address.cep),v.current.setFieldValue("address.nasc",e.address.nasc),v.current.setFieldValue("status",e.status)}}))))}}}]);
//# sourceMappingURL=9.fe8c90cd.chunk.js.map