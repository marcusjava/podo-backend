{"version":3,"sources":["components/common/Loading/index.jsx","redux/actions/serviceActions.js","pages/Service/Table.js","pages/Service/index.js"],"names":["Loading","show","id","saveService","data","dispatch","type","FETCH_SERVICE_REQUEST","axios","post","then","response","FETCH_SERVICE_SUCCESS","payload","catch","error","FETCH_SERVICE_ERROR","updateService","put","UPDATE_SERVICE_SUCCESS","getServices","FETCH_SERVICES_REQUEST","get","FETCH_SERVICES_SUCCESS","FETCH_SERVICES_ERROR","Table","rowSelect","useDispatch","useSelector","state","service","services","items","loading","useEffect","Spinner","striped","hover","version","pagination","options","noDataText","isKey","dataField","hidden","filter","delay","dataSort","width","dataFormat","cell","row","className","OverlayTrigger","placement","overlay","Tooltip","Button","onClick","variant","size","Service","useState","editMod","setEditMod","success","formRef","useRef","toastr","current","setErrors","reset","undefined","Object","keys","length","errorMessages","path","message","handleSubmit","a","schema","Yup","shape","description","required","validate","abortEarly","_id","inner","forEach","erro","Row","clas","Col","md","ref","onSubmit","name","label","style","rows","cols","window","location","reload","setData","observations"],"mappings":"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","file":"static/js/12.44b60bfc.chunk.js","sourcesContent":["import React from 'react';\nimport './styles.css';\nconst Loading = ({ show = false }) => {\n\treturn show === true && <div id=\"cover-spin\"></div>;\n};\n\nexport default Loading;\n","import {\n\tFETCH_SERVICE_REQUEST,\n\tFETCH_SERVICE_SUCCESS,\n\tUPDATE_SERVICE_SUCCESS,\n\tFETCH_SERVICE_ERROR,\n\tFETCH_SERVICES_REQUEST,\n\tFETCH_SERVICES_SUCCESS,\n\tFETCH_SERVICES_ERROR,\n} from '../types';\n\nimport axios from 'axios';\n\nexport const saveService = (data) => (dispatch) => {\n\tdispatch({ type: FETCH_SERVICE_REQUEST });\n\n\treturn axios\n\t\t.post('/services', data)\n\t\t.then((response) => {\n\t\t\tdispatch({ type: FETCH_SERVICE_SUCCESS, payload: response.data });\n\t\t})\n\t\t.catch((error) => {\n\t\t\tdispatch({ type: FETCH_SERVICE_ERROR, payload: error.response.data });\n\t\t});\n};\n\nexport const updateService = (data, id) => (dispatch) => {\n\tdispatch({ type: FETCH_SERVICE_REQUEST });\n\n\treturn axios\n\t\t.put(`/services/${id}`, data)\n\t\t.then((response) => {\n\t\t\tdispatch({ type: UPDATE_SERVICE_SUCCESS, payload: response.data });\n\t\t})\n\t\t.catch((error) => {\n\t\t\tdispatch({ type: FETCH_SERVICE_ERROR, payload: error.response.data });\n\t\t});\n};\n\nexport const getServices = () => (dispatch) => {\n\tdispatch({ type: FETCH_SERVICES_REQUEST });\n\n\treturn axios\n\t\t.get('/services')\n\t\t.then((response) => {\n\t\t\tdispatch({ type: FETCH_SERVICES_SUCCESS, payload: response.data });\n\t\t})\n\t\t.catch((error) => {\n\t\t\tdispatch({ type: FETCH_SERVICES_ERROR, payload: error.response.data });\n\t\t});\n};\n\nexport const Search = (input) => (dispatch) => {\n\tdispatch({ type: FETCH_SERVICES_REQUEST });\n\n\treturn axios\n\t\t.get(`/services/search/?search=${input}`)\n\t\t.then((response) => {\n\t\t\tdispatch({ type: FETCH_SERVICES_SUCCESS, payload: response.data });\n\t\t})\n\t\t.catch((error) => {\n\t\t\tdispatch({ type: FETCH_SERVICES_ERROR, payload: error.response.data });\n\t\t});\n};\n","import React, { useEffect } from 'react';\nimport { BootstrapTable, TableHeaderColumn } from 'react-bootstrap-table';\nimport { Tooltip, OverlayTrigger, Button } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getServices } from '../../redux/actions/serviceActions';\nimport Spinner from '../../components/common/Spinner';\nimport { MdEdit } from 'react-icons/md';\n\nconst Table = ({ rowSelect }) => {\n\tconst dispatch = useDispatch();\n\n\tconst { items, loading } = useSelector((state) => state.service.services);\n\n\tuseEffect(() => {\n\t\tdispatch(getServices());\n\t}, [dispatch]);\n\n\tconst actionFormat = (cell, row) => {\n\t\treturn (\n\t\t\t<div className=\"form-iline\">\n\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"edit\">Editar</Tooltip>}>\n\t\t\t\t\t<Button onClick={() => rowSelect(row)} variant=\"link\">\n\t\t\t\t\t\t<MdEdit size={24} />\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</Button>\n\t\t\t\t</OverlayTrigger>\n\t\t\t</div>\n\t\t);\n\t};\n\n\treturn loading ? (\n\t\t<Spinner />\n\t) : (\n\t\t<BootstrapTable\n\t\t\tdata={items}\n\t\t\tstriped\n\t\t\thover\n\t\t\tversion=\"4\"\n\t\t\tpagination\n\t\t\toptions={{ noDataText: 'Não há itens a exibir' }}\n\t\t>\n\t\t\t<TableHeaderColumn isKey dataField=\"_id\" hidden>\n\t\t\t\tId\n\t\t\t</TableHeaderColumn>\n\t\t\t<TableHeaderColumn\n\t\t\t\tdataField=\"description\"\n\t\t\t\tfilter={{ type: 'TextFilter', delay: 1000 }}\n\t\t\t\tdataSort={true}\n\t\t\t\twidth=\"500px\"\n\t\t\t>\n\t\t\t\tDescrição\n\t\t\t</TableHeaderColumn>\n\t\t\t<TableHeaderColumn dataField=\"observations\">Observações</TableHeaderColumn>\n\t\t\t<TableHeaderColumn width=\"90\" dataFormat={actionFormat}>\n\t\t\t\tAções\n\t\t\t</TableHeaderColumn>\n\t\t</BootstrapTable>\n\t);\n};\n\nexport default Table;\n","import React, { useEffect, useState, useRef } from 'react';\nimport { Row, Col, Button } from 'react-bootstrap';\nimport { Form } from '@unform/web';\nimport * as Yup from 'yup';\nimport { Input, TextArea } from '../../components/common/Form';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { saveService, updateService } from '../../redux/actions/serviceActions';\nimport { toastr } from 'react-redux-toastr';\nimport Loading from '../../components/common/Loading';\nimport Table from './Table';\n\nconst Service = () => {\n\tconst [editMod, setEditMod] = useState(false);\n\n\tconst dispatch = useDispatch();\n\n\tconst { error, success, loading } = useSelector((state) => state.service.service);\n\n\tconst formRef = useRef(null);\n\n\tuseEffect(() => {\n\t\tif (success === true) {\n\t\t\ttoastr.success('Serviço salvo com sucesso!');\n\t\t\tsetEditMod(false);\n\t\t\tformRef.current.setErrors({});\n\t\t\tformRef.current.reset();\n\t\t}\n\t\tif (error !== undefined && Object.keys(error).length > 0) {\n\t\t\tconst errorMessages = {};\n\t\t\terrorMessages[error.path] = error.message;\n\n\t\t\tformRef.current.setErrors(errorMessages);\n\t\t\ttoastr.error('Ocorreu um erro ao salvar o serviço');\n\t\t}\n\t}, [success, error]);\n\n\tconst rowSelect = (row) => {\n\t\tsetEditMod(true);\n\t\tformRef.current.setData({\n\t\t\t_id: row._id,\n\t\t\tdescription: row.description,\n\t\t\tobservations: row.observations,\n\t\t});\n\t};\n\n\tconst handleSubmit = async (data) => {\n\t\ttry {\n\t\t\tconst schema = Yup.object().shape({\n\t\t\t\tdescription: Yup.string().required('Descrição obrigatoria'),\n\t\t\t});\n\t\t\tawait schema.validate(data, { abortEarly: false });\n\t\t\teditMod ? dispatch(updateService(data, data._id)) : dispatch(saveService(data));\n\t\t} catch (error) {\n\t\t\tif (error instanceof Yup.ValidationError) {\n\t\t\t\tconst errorMessages = {};\n\t\t\t\terror.inner.forEach((erro) => {\n\t\t\t\t\terrorMessages[erro.path] = erro.message;\n\t\t\t\t\tformRef.current.setErrors(errorMessages);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Loading show={loading} />\n\t\t\t<Row clas=\"justify-content-center\">\n\t\t\t\t<Col md={12} className=\"text-center\">\n\t\t\t\t\t<p className=\"title\">Cadastro Serviços</p>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t\t<Form ref={formRef} onSubmit={handleSubmit}>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col md={6}>\n\t\t\t\t\t\t<Input name=\"_id\" hidden />\n\t\t\t\t\t\t<Input name=\"description\" label=\"Descrição\" style={{ width: '60%' }} />\n\t\t\t\t\t\t<TextArea name=\"observations\" label=\"Observações\" rows=\"5\" cols=\"33\" />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col md={6} className=\"text-right\">\n\t\t\t\t\t\t<Button type=\"submit\" variant=\"primary\">\n\t\t\t\t\t\t\t{editMod ? 'Atualizar' : 'Salvar'}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button variant=\"danger\" onClick={() => window.location.reload()}>\n\t\t\t\t\t\t\tCancela\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Form>\n\t\t\t<Row className=\"my-4\">\n\t\t\t\t<Col md={12}>\n\t\t\t\t\t<Table rowSelect={rowSelect} />\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t</>\n\t);\n};\n\nexport default Service;\n"],"sourceRoot":""}